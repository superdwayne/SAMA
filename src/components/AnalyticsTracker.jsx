import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { trackPageView, trackUserJourney } from '../utils/analytics';\n\n// Component to track route changes and page views\nconst AnalyticsTracker = () => {\n  const location = useLocation();\n\n  useEffect(() => {\n    // Track page view on route change\n    const path = location.pathname;\n    const search = location.search;\n    \n    // Determine page title and track specific events\n    let pageTitle = 'Amsterdam Street Art Map';\n    let journeyEvent = null;\n    \n    switch (path) {\n      case '/':\n        pageTitle = 'Landing Page - Amsterdam Street Art Map';\n        journeyEvent = 'landing_page_view';\n        break;\n      case '/map':\n        pageTitle = 'Interactive Map - Amsterdam Street Art Map';\n        journeyEvent = 'map_view';\n        break;\n      case '/success':\n      case '/thank-you':\n        pageTitle = 'Payment Success - Amsterdam Street Art Map';\n        journeyEvent = 'payment_success_page';\n        break;\n      case '/activate':\n        pageTitle = 'Account Activation - Amsterdam Street Art Map';\n        journeyEvent = 'activation_page_view';\n        break;\n      default:\n        if (path.startsWith('/payment/')) {\n          const region = path.split('/payment/')[1];\n          pageTitle = `Payment for ${region} - Amsterdam Street Art Map`;\n          journeyEvent = 'payment_page_view';\n        } else if (path.startsWith('/region/')) {\n          const region = path.split('/region/')[1];\n          pageTitle = `${region} Region - Amsterdam Street Art Map`;\n          journeyEvent = 'region_deep_link';\n        }\n    }\n    \n    // Track page view\n    trackPageView(path + search, pageTitle, {\n      previous_page: document.referrer,\n      timestamp: Date.now()\n    });\n    \n    // Track user journey event\n    if (journeyEvent) {\n      trackUserJourney(journeyEvent, {\n        path: path,\n        search_params: search,\n        timestamp: Date.now()\n      });\n    }\n    \n    // Track deep link usage if applicable\n    const urlParams = new URLSearchParams(search);\n    if (urlParams.get('magic')) {\n      trackUserJourney('magic_link_clicked');\n    }\n    if (urlParams.get('token')) {\n      trackUserJourney('token_entry_attempted');\n    }\n    \n  }, [location]);\n\n  return null; // This component doesn't render anything\n};\n\nexport default AnalyticsTracker;\n